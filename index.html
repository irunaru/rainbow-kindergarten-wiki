<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ë¬´ì§€ê°œ ìœ ì¹˜ì› & ì–´ë¦°ì´ì§‘ ìºë¦­í„° ìœ„í‚¤</title>
  <style>
    /* í°íŠ¸ ì„¤ì • */
    @font-face {
      font-family: 'OwnglyphPucca';
      src: url('font/ì˜¨ê¸€ì ë¿Œê¹Œ.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    * {
      box-sizing: border-box;
    }

    :root {
      --primary: #ff5c8a;
      --primary-light: #ffcfdf;
      --secondary: #d6336c;
      --white: #ffffff;
      --bg: #f8f9fa;
      --text: #2d3436;
      --text-light: #636e72;
      --shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
      --glass: rgba(255, 255, 255, 0.9);
    }

    body {
      font-family: 'OwnglyphPucca', "Apple SD Gothic Neo", sans-serif;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }

    header {
      background: linear-gradient(135deg, #ffcfdf 0%, #ff5c8a 100%);
      padding: 30px 20px;
      font-size: 28px;
      font-weight: bold;
      text-align: center;
      color: white;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      word-break: keep-all;
    }

    nav {
      background: var(--glass);
      backdrop-filter: blur(10px);
      padding: 10px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.3);
      position: sticky;
      top: 0;
      z-index: 100;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
    }

    nav div.menu-links {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
    }

    nav a {
      text-decoration: none;
      font-weight: bold;
      color: var(--text-light);
      font-size: 16px;
      padding: 8px 12px;
      border-radius: 8px;
      transition: all 0.3s;
    }

    nav a:hover {
      color: var(--primary);
      background: rgba(255, 92, 138, 0.05);
    }

    .search-bar {
      display: flex;
      justify-content: center;
      padding: 0 20px;
    }

    .search-bar input {
      padding: 12px 20px;
      width: 100%;
      max-width: 400px;
      border: 2px solid var(--primary-light);
      border-radius: 30px;
      outline: none;
      font-size: 16px;
      font-family: inherit;
      transition: all 0.3s;
    }

    .search-bar input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 15px rgba(255, 92, 138, 0.2);
    }

    /* í¸ì§‘ ëª¨ë“œ í† ê¸€ ë²„íŠ¼ */
    .edit-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 200;
    }

    .edit-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 15px 25px;
      border-radius: 50px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 4px 15px rgba(255, 92, 138, 0.4);
      transition: all 0.3s;
      font-family: inherit;
    }

    .edit-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(255, 92, 138, 0.6);
    }

    .edit-btn.active {
      background: #51cf66;
    }

    main {
      padding: 30px 20px;
      max-width: 1100px;
      margin: auto;
    }

    section {
      margin-bottom: 50px;
    }

    h2 {
      border-left: 6px solid var(--primary);
      padding-left: 12px;
      font-size: 24px;
      margin-bottom: 20px;
      color: var(--text);
    }

    .char-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }

    .card {
      background: var(--white);
      border-radius: 20px;
      padding: 20px;
      box-shadow: var(--shadow);
      display: flex;
      gap: 20px;
      transition: transform 0.3s;
      border: 1px solid rgba(0, 0, 0, 0.02);
      align-items: center;
      position: relative;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .face {
      width: 120px;
      height: 120px;
      border-radius: 20px;
      background: #eee;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      border: 3px solid #fff;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      flex-shrink: 0;
      position: relative;
    }

    .face img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* ì´ë¯¸ì§€ ì—…ë¡œë“œ ì»¨íŠ¸ë¡¤ */
    .upload-controls {
      display: none;
      position: absolute;
      top: 10px;
      right: 10px;
      gap: 5px;
      flex-direction: column;
    }

    body.edit-mode .upload-controls {
      display: flex;
    }

    .file-input-wrapper {
      position: relative;
      overflow: hidden;
    }

    .file-input-wrapper input[type=file] {
      position: absolute;
      left: -9999px;
    }

    .file-input-label {
      background: var(--primary);
      color: white;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.3s;
      display: block;
      text-align: center;
      white-space: nowrap;
    }

    .file-input-label:hover {
      background: var(--secondary);
    }

    .delete-img-btn {
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.3s;
      white-space: nowrap;
    }

    .delete-img-btn:hover {
      background: #fa5252;
    }

    .upload-status {
      font-size: 10px;
      color: var(--text-light);
      text-align: center;
      margin-top: 2px;
    }

    .info-box {
      flex: 1;
      min-width: 0;
    }

    .info-box h3 {
      margin: 0 0 10px 0;
      font-size: 24px;
      color: var(--primary);
      word-break: keep-all;
    }

    .info-text {
      font-size: 15px;
      margin-bottom: 4px;
      display: flex;
      align-items: flex-start;
    }

    .info-text b {
      color: var(--text-light);
      min-width: 60px;
      font-size: 13px;
      flex-shrink: 0;
    }

    .tag {
      display: inline-block;
      background: var(--primary-light);
      color: var(--secondary);
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: bold;
      margin-top: 8px;
    }

    footer {
      text-align: center;
      padding: 40px 20px;
      color: #ccc;
      font-size: 13px;
      border-top: 1px solid #eee;
    }

    @media (max-width: 600px) {
      .char-grid {
        grid-template-columns: 1fr;
      }

      .card {
        flex-direction: column;
        text-align: center;
        gap: 15px;
      }

      .info-text {
        justify-content: center;
      }

      .info-text b {
        text-align: right;
        margin-right: 8px;
      }

      .face {
        width: 140px;
        height: 140px;
        margin: 0 auto;
      }

      header {
        font-size: 24px;
      }

      .upload-controls {
        position: static;
        flex-direction: row;
        justify-content: center;
        margin-top: 10px;
      }
    }
  </style>
</head>

<body>
  <header>ğŸŒˆ ë¬´ì§€ê°œ ìœ ì¹˜ì›<br>& ì–´ë¦°ì´ì§‘ ìœ„í‚¤</header>

  <nav>
    <div class="menu-links">
      <a href="#kindergarten">ğŸ« ìœ ì¹˜ì›</a>
      <a href="#daycare">ğŸ§¸ ì–´ë¦°ì´ì§‘</a>
      <a href="#pair">ğŸ¤ ê¶í•©</a>
    </div>
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="ì´ë¦„, ì¢…ë¥˜, íŠ¹ì§• ê²€ìƒ‰...">
    </div>
  </nav>

  <div class="edit-toggle">
    <button class="edit-btn" onclick="toggleEditMode()">âœï¸ í¸ì§‘ ëª¨ë“œ</button>
  </div>

  <main>
    <section id="kindergarten">
      <h2>ğŸ« ìœ ì¹˜ì› ì›ìƒ</h2>
      <div id="k-list" class="char-grid"></div>
    </section>

    <section id="daycare">
      <h2>ğŸ§¸ ì–´ë¦°ì´ì§‘ ì›ìƒ</h2>
      <div id="d-list" class="char-grid"></div>
    </section>

    <section id="pair">
      <h2>ğŸ¤ íŠ¹ë³„ ê¶í•©</h2>
      <div class="char-grid">
        <div class="card">
          <div class="info-box" style="text-align:center;">
            <h3>ğŸ§¸ ê·€ì—¼ì¦ˆ: ë£¨í”¼ Ã— ë£¹í¬</h3>
            <p>ê·€ì—¬ì›€ ì‹œë„ˆì§€ í­ë°œ ì¡°í•©!</p>
          </div>
        </div>
        <div class="card">
          <div class="info-box" style="text-align:center;">
            <h3>ğŸ¥ ë½€ì¨•ì¦ˆ: ë£¨í”¼ Ã— ì•¼ì½”</h3>
            <p>ì‚¬ê³ ë­‰ì¹˜ ë§ˆì„±ì˜ ì¡°í•©!</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    const API_URL = 'https://kindergarten-api.irunaru.workers.dev';
    let editMode = false;

    const charactersData = [
      { "ì´ë¦„": "ë£¨í”¼", "ì¢…ë¥˜": "ë¹„ë²„", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "INTP", "íŠ¹ì§•": "ì œì¼ëš±ëš±", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ê±¸ê·¸ë£¹", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "í˜ì´ì•½í•œê±°", "ì´ë¯¸ì§€": "images/1.png", "ì„±ë³„": "ë‚¨ì", "ì·¨ë¯¸": "í‚¥ë³µì‹±", "ë¹„ë°€": "ì´ˆê³ ë„ë¹„ë§Œ" },
      { "ì´ë¦„": "ë£¹í¬", "ì¢…ë¥˜": "ë¹„ë²„", "ì†Œì†": "ì–´ë¦°ì´ì§‘", "MBTI": "ENFP", "íŠ¹ì§•": "ì¤‘ê°„ëš±ëš±", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ì¹˜í‚¨", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ì•¼ì±„", "ì´ë¯¸ì§€": "images/2.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ê¶Œíˆ¬", "ë¹„ë°€": "ê³ ë„ë¹„ë§Œ" },
      { "ì´ë¦„": "ë¤‚ì´", "ì¢…ë¥˜": "ë¹„ë²„", "ì†Œì†": "ì–´ë¦°ì´ì§‘", "MBTI": "ESTJ", "íŠ¹ì§•": "ë§ˆë¦„", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ìŒì ˆê³¤", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ë§ˆë¥¸ê²ƒ", "ì´ë¯¸ì§€": "images/3.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ìŒì ˆê³¤", "ë¹„ë°€": "ì €ì²´ì¤‘" },
      { "ì´ë¦„": "ì•¼ì½”", "ì¢…ë¥˜": "ë¼ì§€", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ENFP", "íŠ¹ì§•": "ì‚¬ë™ì´í˜•", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ë¯¼ì´ˆ", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "íŒŒì¸ì• í”Œí”¼ì", "ì´ë¯¸ì§€": "images/4.png", "ì„±ë³„": "ë‚¨ì", "ì·¨ë¯¸": "ë¯¼ì´ˆë¨¹ê¸°", "ë¹„ë°€": "ì˜¤ì´ì‹«ì–´" },
      { "ì´ë¦„": "ì‚¬ë™", "ì¢…ë¥˜": "ë¼ì§€", "ì†Œì†": "ì–´ë¦°ì´ì§‘", "MBTI": "ENFP", "íŠ¹ì§•": "ì¼ë¯¼ì´", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ë°±ì„¤ì´", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ê³µë¶€", "ì´ë¯¸ì§€": "images/5.png", "ì„±ë³„": "ë‚¨ì", "ì·¨ë¯¸": "ìœ íŠœë¸Œë³´ê¸°", "ë¹„ë°€": "ë°±ì„¤ì´ì§ì‚¬ë‘" },
      { "ì´ë¦„": "ìš°ì‚¬ê¸°", "ì¢…ë¥˜": "í† ë¼", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ISTP", "íŠ¹ì§•": "ëˆ„ë ‡ë‹¤", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ê³µë¶€", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ë°”ë³´", "ì´ë¯¸ì§€": "images/6.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ê³µë¶€", "ë¹„ë°€": "ê³µë¶€ì¢‹ì•„" },
      { "ì´ë¦„": "ì„ì¼í›„", "ì¢…ë¥˜": "ì˜¤ë¦¬", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ENTP", "íŠ¹ì§•": "ì…ì´ ê¸¸ë‹¤", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ì•„ì´ëŒ", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ëƒ„ìƒˆ", "ì´ë¯¸ì§€": "images/7.png", "ì„±ë³„": "ë‚¨ì", "ì·¨ë¯¸": "ëˆ•ê¸°", "ë¹„ë°€": "ë•ì§ˆì¢‹ì•„" },
      { "ì´ë¦„": "ì¨©êµ¬ë¦¬", "ì¢…ë¥˜": "ê°œêµ¬ë¦¬", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ESTP", "íŠ¹ì§•": "ë‚˜ë¹„ë„¥íƒ€ì´", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ê²Œì„", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ê³µë¶€", "ì´ë¯¸ì§€": "images/8.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ê°œêµ´ê±°ë¦¬ê¸°", "ë¹„ë°€": "ê²Œì„ì¢‹ì•„" },
      { "ì´ë¦„": "ì¨©ê·œë¦¬", "ì¢…ë¥˜": "ê°œêµ¬ë¦¬", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ENFP", "íŠ¹ì§•": "í‰ë²”í•˜ë‹¤", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ë†€ê¸°", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ì‹œí—˜ë³´ê¸°", "ì´ë¯¸ì§€": "images/9.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ì¥ë‚œì¹˜ê¸°", "ë¹„ë°€": "ë…¸ëŠ”ê²Œì œì¼ì¢‹ì•„" },
      { "ì´ë¦„": "ì¨©ë‹´ê³°", "ì¢…ë¥˜": "ê³°", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ISTJ", "íŠ¹ì§•": "ì…ì´ì‚ì ¸ìˆë‹¤", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ì²œì¬", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ë°”ë³´", "ì´ë¯¸ì§€": "images/10.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ì ìê¸°", "ë¹„ë°€": "ë‚˜ëŠ”ì²œì¬" },
      { "ì´ë¦„": "ì¨©ë§Œë“€", "ì¢…ë¥˜": "ë°˜ì „ë¬¸ì–´", "ì†Œì†": "ì–´ë¦°ì´ì§‘", "MBTI": "ISTP", "íŠ¹ì§•": "ì œì¼ì‘ë‹¤", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ê¹¨ë—í•œê±°", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ë”ëŸ¬ìš´ê±°", "ì´ë¯¸ì§€": "images/11.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ê·¸ë¦¼ê·¸ë¦¬ê¸°", "ë¹„ë°€": "ì‘ì•„ì„œê³ ë¯¼" },
      { "ì´ë¦„": "ì¨©ë§Œì¥¬", "ì¢…ë¥˜": "ë°˜ì „ë¬¸ì–´", "ì†Œì†": "ì–´ë¦°ì´ì§‘", "MBTI": "ISTP", "íŠ¹ì§•": "ì¤‘ê°„ì‚¬ì´ì¦ˆ", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ë§›ìˆëŠ”ê±°", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ë§›ì—†ëŠ”ê±°", "ì´ë¯¸ì§€": "images/12.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ë¨¹ê¸°", "ë¹„ë°€": "ë°°ê³ íŒŒ" },
      { "ì´ë¦„": "ì¨©ë¬¸ì–´", "ì¢…ë¥˜": "ë°˜ì „ë¬¸ì–´", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ENFP", "íŠ¹ì§•": "ì œì¼í°ë¬¸ì–´", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ì°©í•œê±°", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ë‚˜ìœê±°", "ì´ë¯¸ì§€": "images/13.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ë…¸ë˜ë¶€ë¥´ê¸°", "ë¹„ë°€": "ì„¸ì ¤ê·€" },
      { "ì´ë¦„": "ì¨©ë¬´ë„ˆ", "ì¢…ë¥˜": "ë°˜ì „ë¬¸ì–´", "ì†Œì†": "ì–´ë¦°ì´ì§‘", "MBTI": "ISTP", "íŠ¹ì§•": "ë§ë‘í•¨", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ë†€ê¸°", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ì‰¬ê¸°", "ì´ë¯¸ì§€": "images/14.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ë†€ê¸°", "ë¹„ë°€": "ë†€ê³ ì‹¶ì–´" },
      { "ì´ë¦„": "ì¨©ë¹¤ì®¸", "ì¢…ë¥˜": "í† ë¼", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ENFP", "íŠ¹ì§•": "íŒ¬í‹°ë§Œì…ìŒ", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "íŒ¬í‹°", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ì¶”ìš´ê±°", "ì´ë¯¸ì§€": "images/15.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ë³µì‹±", "ë¹„ë°€": "íŒ¬í‹°ì¡°ì•„" },
      { "ì´ë¦„": "ì¨©ì„œë¹ˆ", "ì¢…ë¥˜": "ë² ë êµ¬ì–´", "ì†Œì†": "ì–´ë¦°ì´ì§‘", "MBTI": "ENFP", "íŠ¹ì§•": "ì• ê¸°ì„", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ìª½ìª½ì´", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ë³µì‹±", "ì´ë¯¸ì§€": "images/16.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ìª½ìª½ì´ë¬¼ê¸°", "ë¹„ë°€": "ìª½ìª½ì´..." },
      { "ì´ë¦„": "ì¨©ì„¤", "ì¢…ë¥˜": "í˜¸ë‘ì´", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ENFP", "íŠ¹ì§•": "í•˜ì–Œ", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ìŠ¤í‚¤", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ë´„", "ì´ë¯¸ì§€": "images/17.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "íƒœê¶Œë„", "ë¹„ë°€": "ìš´ë™ì¡°ì•„" },
      { "ì´ë¦„": "ì¨©ì„¸ë¹ˆ", "ì¢…ë¥˜": "ë² ë êµ¬ì–´", "ì†Œì†": "ì–´ë¦°ì´ì§‘", "MBTI": "ENFP", "íŠ¹ì§•": "ì œì¼ì‘ì€ì• ê¸°", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ìˆë†ˆ", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ì•½í•œë†ˆ", "ì´ë¯¸ì§€": "images/18.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ì€ê·¼ì”", "ë¹„ë°€": "ë‚œì„" },
      { "ì´ë¦„": "ì¨©ì†¡", "ì¢…ë¥˜": "ì˜¤ë‘ìš°íƒ„", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ENFP", "íŠ¹ì§•": "ë°°ê°€ë‚˜ì˜´", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ë®¤ì§€ì»¬", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ê³µì—°ì·¨ì†Œ", "ì´ë¯¸ì§€": "images/19.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "íŠ¸ë¡¯íŠ¸", "ë¹„ë°€": "ë…¸ë˜ê°€ì¡°ì•„" },
      { "ì´ë¦„": "ì¨©ìŠ", "ì¢…ë¥˜": "ì˜¤ë‘ìš°íƒ„", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ENFP", "íŠ¹ì§•": "ë°°ê°€ë‚˜ì˜´", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ë¦¬ë“¬ì²´ì¡°", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ëª»ë¨¹ê¸°", "ì´ë¯¸ì§€": "images/20.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ë¨¹ê¸°", "ë¹„ë°€": "ë¨¹ëŠ”ê²Œì¡°ì•„" },
      { "ì´ë¦„": "ì¨©í¬ìš©", "ì¢…ë¥˜": "ê°•ì•„ì§€", "ì†Œì†": "ì–´ë¦°ì´ì§‘", "MBTI": "ENFP", "íŠ¹ì§•": "ê°•ì•„ì§€", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "íŒ¨ê¸°", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ì•½í•œë†ˆ", "ì´ë¯¸ì§€": "images/21.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "íŒ¨ê¸°", "ë¹„ë°€": "ë³µì‹±ì¡°ì•„" },
      { "ì´ë¦„": "ì¹˜ì´ì¹´ì™€", "ì¢…ë¥˜": "ê³°", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ENFP", "íŠ¹ì§•": "í•˜ì–Œ", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ìš”ì¿ ë¥´íŠ¸", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ìŒì‹ì©ê¸°", "ì´ë¯¸ì§€": "images/22.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ìš”êµ¬ë¥´íŠ¸ë¨¹ê¸°", "ë¹„ë°€": "ë¨¹ê¸°ì‚¬ë‘" },
      { "ì´ë¦„": "í•˜ì¹˜ì™€ë ˆ", "ì¢…ë¥˜": "ê³ ì–‘ì´", "ì†Œì†": "ìœ ì¹˜ì›", "MBTI": "ENFP", "íŠ¹ì§•": "ê·€ì—¬ì›€", "ì¢‹ì•„í•˜ëŠ”ê²ƒ": "ê·€ì—¬ìš´ê±°", "ì‹«ì–´í•˜ëŠ”ê²ƒ": "ë˜¥", "ì´ë¯¸ì§€": "images/23.png", "ì„±ë³„": "ì—¬ì", "ì·¨ë¯¸": "ë…¸ë˜", "ë¹„ë°€": "ì—†ì–´ìš©" }
    ];

    // í¸ì§‘ ëª¨ë“œ í† ê¸€
    function toggleEditMode() {
      editMode = !editMode;
      document.body.classList.toggle('edit-mode', editMode);
      
      const btn = document.querySelector('.edit-btn');
      if (editMode) {
        btn.textContent = 'âœ… ì™„ë£Œ';
        btn.classList.add('active');
      } else {
        btn.textContent = 'âœï¸ í¸ì§‘ ëª¨ë“œ';
        btn.classList.remove('active');
      }
    }

    // ìºë¦­í„° ID ìƒì„± (ì´ë¦„ì„ ì˜ë¬¸ìœ¼ë¡œ ë³€í™˜)
    function getCharacterId(name) {
      return name.replace(/\s/g, '_').toLowerCase();
    }

    // ì´ë¯¸ì§€ ë¡œë“œ
    async function loadCloudImage(characterId, imgElement) {
      try {
        const response = await fetch(`${API_URL}/image/${characterId}`);
        if (response.ok) {
          const blob = await response.blob();
          const url = URL.createObjectURL(blob);
          imgElement.src = url;
          return true;
        }
      } catch (error) {
        console.log(`No cloud image for ${characterId}`);
      }
      return false;
    }

    // ì´ë¯¸ì§€ ì—…ë¡œë“œ
    async function uploadImage(characterId, name) {
      const fileInput = document.getElementById(`file-${characterId}`);
      const file = fileInput.files[0];
      const statusDiv = document.getElementById(`status-${characterId}`);

      if (!file) return;

      statusDiv.textContent = 'ì—…ë¡œë“œ ì¤‘...';

      const formData = new FormData();
      formData.append('image', file);

      try {
        const response = await fetch(`${API_URL}/upload/${characterId}`, {
          method: 'POST',
          body: formData,
        });

        if (response.ok) {
          statusDiv.textContent = 'âœ… ì™„ë£Œ!';
          setTimeout(() => {
            statusDiv.textContent = '';
          }, 2000);
          
          // ì´ë¯¸ì§€ ìƒˆë¡œê³ ì¹¨
          const imgElement = document.getElementById(`img-${characterId}`);
          await loadCloudImage(characterId, imgElement);
        } else {
          const error = await response.text();
          statusDiv.textContent = `âŒ ì‹¤íŒ¨`;
        }
      } catch (error) {
        statusDiv.textContent = `âŒ ì˜¤ë¥˜`;
      }

      fileInput.value = '';
    }

    // ì´ë¯¸ì§€ ì‚­ì œ
    async function deleteImage(characterId, originalImagePath) {
      if (!confirm('í´ë¼ìš°ë“œ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

      const statusDiv = document.getElementById(`status-${characterId}`);
      statusDiv.textContent = 'ì‚­ì œ ì¤‘...';

      try {
        const response = await fetch(`${API_URL}/image/${characterId}`, {
          method: 'DELETE',
        });

        if (response.ok) {
          statusDiv.textContent = 'âœ… ì‚­ì œ!';
          setTimeout(() => {
            statusDiv.textContent = '';
          }, 2000);

          // ì›ë³¸ ì´ë¯¸ì§€ë¡œ ë³µì›
          const imgElement = document.getElementById(`img-${characterId}`);
          imgElement.src = originalImagePath;
        } else {
          statusDiv.textContent = 'âŒ ì‹¤íŒ¨';
        }
      } catch (error) {
        statusDiv.textContent = `âŒ ì˜¤ë¥˜`;
      }
    }

    function renderCharacters(charList) {
      const kList = document.getElementById('k-list');
      const dList = document.getElementById('d-list');
      kList.innerHTML = '';
      dList.innerHTML = '';
      let kCount = 0, dCount = 0;

      charList.forEach(char => {
        const characterId = getCharacterId(char.ì´ë¦„);
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="face">
            <img id="img-${characterId}" src="${char.ì´ë¯¸ì§€}" alt="${char.ì´ë¦„}" onerror="this.src='https://via.placeholder.com/150?text=No+Image'">
          </div>
          <div class="info-box">
            <h3>${char.ì´ë¦„}</h3>
            <div class="info-text"><b>ì¢…ë¥˜:</b> <span>${char.ì¢…ë¥˜}</span></div>
            <div class="info-text"><b>ì„±ë³„:</b> <span>${char.ì„±ë³„}</span></div>
            <div class="info-text"><b>MBTI:</b> <span>${char.MBTI}</span></div>
            <div class="info-text"><b>íŠ¹ì§•:</b> <span>${char.íŠ¹ì§•}</span></div>
            <div class="info-text"><b>ì¢‹ì•„í•¨:</b> <span>${char.ì¢‹ì•„í•˜ëŠ”ê²ƒ}</span></div>
            <div class="info-text"><b>ì·¨ë¯¸:</b> <span>${char.ì·¨ë¯¸}</span></div>
            <span class="tag"># ${char.ë¹„ë°€}</span>
          </div>
          <div class="upload-controls">
            <div class="file-input-wrapper">
              <input type="file" id="file-${characterId}" accept="image/*" onchange="uploadImage('${characterId}', '${char.ì´ë¦„}')">
              <label for="file-${characterId}" class="file-input-label">ğŸ“¸ ì—…ë¡œë“œ</label>
            </div>
            <button class="delete-img-btn" onclick="deleteImage('${characterId}', '${char.ì´ë¯¸ì§€}')">ğŸ—‘ï¸ ì‚­ì œ</button>
            <div class="upload-status" id="status-${characterId}"></div>
          </div>`;
        
        if (char.ì†Œì† === 'ìœ ì¹˜ì›') {
          kList.appendChild(card);
          kCount++;
        } else {
          dList.appendChild(card);
          dCount++;
        }

        // í´ë¼ìš°ë“œ ì´ë¯¸ì§€ ë¡œë“œ ì‹œë„
        const imgElement = document.getElementById(`img-${characterId}`);
        loadCloudImage(characterId, imgElement);
      });
      
      document.querySelector('#kindergarten h2').textContent = `ğŸ« ìœ ì¹˜ì› ì›ìƒ (${kCount}ëª…)`;
      document.querySelector('#daycare h2').textContent = `ğŸ§¸ ì–´ë¦°ì´ì§‘ ì›ìƒ (${dCount}ëª…)`;
    }

    document.getElementById('searchInput').addEventListener('input', (e) => {
      const term = e.target.value.toLowerCase();
      const filtered = charactersData.filter(c =>
        c.ì´ë¦„.includes(term) || c.ì¢…ë¥˜.includes(term) || c.MBTI.toLowerCase().includes(term)
      );
      renderCharacters(filtered);
    });

    window.addEventListener('DOMContentLoaded', () => renderCharacters(charactersData));
  </script>
</body>

</html>
